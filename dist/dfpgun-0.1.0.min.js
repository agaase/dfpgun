/*! dfpgun.js - v0.1.0 - 2014-03-16
* https://github.com/agaase/
* Copyright (c) 2014 agaase; Licensed MIT */
!function(){var a={},b=function(a){console.log("dfpgun:"+(new Date).getTime()+":"+a)},c=function(){var a;if(a=a||$('script[src*="gpt.js"]').length,!a){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[];var b=document.createElement("script");b.async=!0,b.type="text/javascript",b.onerror=function(){console.log("There is an ad blocker")};var c="https:"===document.location.protocol;b.src=(c?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d),"none"===b.style.display&&console.log("There is an ad blocker")}},d=function(c,d){if("6"===d.getMessageId().toString()){var f=d.getMessageArgs();b("ad loaded-"+f);var g=a[f],h=g.element,i=g.callback;i&&(b("callback called"+f),i(g.element)),g.refreshed||h.is(":visible")||!g.forceRefresh||(e(f),g.refreshed=!0)}},e=function(c){var d=a[c];googletag.cmd.push(function(){b("refreshed-"+c),googletag.pubads().refresh([d.slot])})},f=function(c,e){var f=e.adunit,g=e.sizes;googletag=e.googletag||googletag,a[f]={},a[f].callback=e.callback||void 0,a[f].element=c,a[f].forceRefresh="undefined"!=typeof e.forceRefresh?e.forceRefresh:!0,b("dfploader:Triggering ad-"+f);var h,i="Ad_"+parseInt(1e5*Math.random());c.empty().attr("id",i),googletag.cmd.push(function(){googletag.debug_log.log=d,googletag.pubads().collapseEmptyDivs(!0),googletag.enableServices()}),googletag.cmd.push(function(){h=googletag.defineSlot(f,g,i).addService(googletag.pubads()),a[f].slot=h}),googletag.cmd.push(function(){googletag.display(i)})};$.fn.dfpgun=function(a){c(),f($(this),a)}}($);